{"version":3,"sources":["infospot/Infospot.js"],"names":["define","THREE","DataImage","Constants","TextureLoader","TWEEN","Infospot","scale","imageSrc","animated","Info","Sprite","call","this","type","undefined","isHovering","frustumCulled","element","toPanorama","cursorStyle","mode","MODES","NORMAL","set","rotation","y","Math","PI","container","originalRaycast","raycast","HANDLER_FOCUS","material","side","DoubleSide","depthTest","transparent","opacity","scaleUpAnimation","Tween","scaleDownAnimation","postLoad","texture","ratio","image","width","height","textureScale","Vector3","naturalWidth","naturalHeight","copy","to","x","easing","Easing","Elastic","Out","map","needsUpdate","bind","showAnimation","onStart","enableRaycast","Quartic","hideAnimation","addEventListener","onClick","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","setContainer","onDismiss","setFocusMethod","load","prototype","Object","assign","create","constructor","data","HTMLElement","appendChild","getContainer","event","lockHoverElement","unlockHoverElement","style","cursor","stop","start","mouseEvent","clientX","clientY","left","right","CARDBOARD","STEREO","display","_width","clientWidth","_height","clientHeight","locked","halfWidth","halfHeight","cloneNode","translateElement","top","delta","verticalDelta","setElementStyle","value","webkitTransform","msTransform","transform","setText","text","textContent","setCursorHoverStyle","addHoverText","document","createElement","color","maxWidth","maxHeight","textShadow","fontFamily","position","classList","add","addHoverElement","el","removeHoverElement","removeChild","enabled","show","delay","hide","method","focus","duration","dispose","geometry","parent","remove"],"mappings":"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","file":"../../infospot/Infospot.js","sourcesContent":["define([\n    'skylark-threejs',\n    '../DataImage',\n    '../Constants',\n    '../loaders/TextureLoader',\n    'skylark-tweenjs'\n], function (THREE, DataImage, Constants, TextureLoader, TWEEN) {\n    'use strict';\n    function Infospot(scale = 300, imageSrc, animated) {\n        const duration = 500, scaleFactor = 1.3;\n        imageSrc = imageSrc || DataImage.Info;\n        THREE.Sprite.call(this);\n        this.type = 'infospot';\n        this.animated = animated !== undefined ? animated : true;\n        this.isHovering = false;\n        this.frustumCulled = false;\n        this.element = null;\n        this.toPanorama = null;\n        this.cursorStyle = null;\n        this.mode = Constants.MODES.NORMAL;\n        this.scale.set(scale, scale, 1);\n        this.rotation.y = Math.PI;\n        this.container = null;\n        this.originalRaycast = this.raycast;\n        this.HANDLER_FOCUS = null;\n        this.material.side = THREE.DoubleSide;\n        this.material.depthTest = false;\n        this.material.transparent = true;\n        this.material.opacity = 0;\n        this.scaleUpAnimation = new TWEEN.Tween();\n        this.scaleDownAnimation = new TWEEN.Tween();\n        const postLoad = function (texture) {\n            if (!this.material) {\n                return;\n            }\n            const ratio = texture.image.width / texture.image.height;\n            const textureScale = new THREE.Vector3();\n            texture.image.width = texture.image.naturalWidth || 64;\n            texture.image.height = texture.image.naturalHeight || 64;\n            this.scale.set(ratio * scale, scale, 1);\n            textureScale.copy(this.scale);\n            this.scaleUpAnimation = new TWEEN.Tween(this.scale).to({\n                x: textureScale.x * scaleFactor,\n                y: textureScale.y * scaleFactor\n            }, duration).easing(TWEEN.Easing.Elastic.Out);\n            this.scaleDownAnimation = new TWEEN.Tween(this.scale).to({\n                x: textureScale.x,\n                y: textureScale.y\n            }, duration).easing(TWEEN.Easing.Elastic.Out);\n            this.material.map = texture;\n            this.material.needsUpdate = true;\n        }.bind(this);\n        this.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(this.enableRaycast.bind(this, true)).easing(TWEEN.Easing.Quartic.Out);\n        this.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onStart(this.enableRaycast.bind(this, false)).easing(TWEEN.Easing.Quartic.Out);\n        this.addEventListener('click', this.onClick);\n        this.addEventListener('hover', this.onHover);\n        this.addEventListener('hoverenter', this.onHoverStart);\n        this.addEventListener('hoverleave', this.onHoverEnd);\n        this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n        this.addEventListener('panolens-container', this.setContainer.bind(this));\n        this.addEventListener('dismiss', this.onDismiss);\n        this.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n        TextureLoader.load(imageSrc, postLoad);\n    }\n    ;\n    Infospot.prototype = Object.assign(Object.create(THREE.Sprite.prototype), {\n        constructor: Infospot,\n        setContainer: function (data) {\n            let container;\n            if (data instanceof HTMLElement) {\n                container = data;\n            } else if (data && data.container) {\n                container = data.container;\n            }\n            if (container && this.element) {\n                container.appendChild(this.element);\n            }\n            this.container = container;\n        },\n        getContainer: function () {\n            return this.container;\n        },\n        onClick: function (event) {\n            if (this.element && this.getContainer()) {\n                this.onHoverStart(event);\n                this.lockHoverElement();\n            }\n        },\n        onDismiss: function () {\n            if (this.element) {\n                this.unlockHoverElement();\n                this.onHoverEnd();\n            }\n        },\n        onHover: function () {\n        },\n        onHoverStart: function (event) {\n            if (!this.getContainer()) {\n                return;\n            }\n            const cursorStyle = this.cursorStyle || (this.mode === Constants.MODES.NORMAL ? 'pointer' : 'default');\n            const {scaleDownAnimation, scaleUpAnimation, element} = this;\n            this.isHovering = true;\n            this.container.style.cursor = cursorStyle;\n            if (this.animated) {\n                scaleDownAnimation.stop();\n                scaleUpAnimation.start();\n            }\n            if (element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n                const {left, right, style} = element;\n                if (this.mode === Constants.MODES.CARDBOARD || this.mode === Constants.MODES.STEREO) {\n                    style.display = 'none';\n                    left.style.display = 'block';\n                    right.style.display = 'block';\n                    element._width = left.clientWidth;\n                    element._height = left.clientHeight;\n                } else {\n                    style.display = 'block';\n                    if (left) {\n                        left.style.display = 'none';\n                    }\n                    if (right) {\n                        right.style.display = 'none';\n                    }\n                    element._width = element.clientWidth;\n                    element._height = element.clientHeight;\n                }\n            }\n        },\n        onHoverEnd: function () {\n            if (!this.getContainer()) {\n                return;\n            }\n            const {scaleDownAnimation, scaleUpAnimation, element} = this;\n            this.isHovering = false;\n            this.container.style.cursor = 'default';\n            if (this.animated) {\n                scaleUpAnimation.stop();\n                scaleDownAnimation.start();\n            }\n            if (element && !this.element.locked) {\n                const {left, right, style} = element;\n                style.display = 'none';\n                if (left) {\n                    left.style.display = 'none';\n                }\n                if (right) {\n                    right.style.display = 'none';\n                }\n                this.unlockHoverElement();\n            }\n        },\n        onDualEyeEffect: function (event) {\n            if (!this.getContainer()) {\n                return;\n            }\n            let element, halfWidth, halfHeight;\n            this.mode = event.mode;\n            element = this.element;\n            halfWidth = this.container.clientWidth / 2;\n            halfHeight = this.container.clientHeight / 2;\n            if (!element) {\n                return;\n            }\n            if (!element.left && !element.right) {\n                element.left = element.cloneNode(true);\n                element.right = element.cloneNode(true);\n            }\n            if (this.mode === Constants.MODES.CARDBOARD || this.mode === Constants.MODES.STEREO) {\n                element.left.style.display = element.style.display;\n                element.right.style.display = element.style.display;\n                element.style.display = 'none';\n            } else {\n                element.style.display = element.left.style.display;\n                element.left.style.display = 'none';\n                element.right.style.display = 'none';\n            }\n            this.translateElement(halfWidth, halfHeight);\n            this.container.appendChild(element.left);\n            this.container.appendChild(element.right);\n        },\n        translateElement: function (x, y) {\n            if (!this.element._width || !this.element._height || !this.getContainer()) {\n                return;\n            }\n            let left, top, element, width, height, delta, container;\n            container = this.container;\n            element = this.element;\n            width = element._width / 2;\n            height = element._height / 2;\n            delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n            left = x - width;\n            top = y - height - delta;\n            if ((this.mode === Constants.MODES.CARDBOARD || this.mode === Constants.MODES.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n                left = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n                top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n                this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n                left += container.clientWidth / 2;\n                this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n            } else {\n                this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n            }\n        },\n        setElementStyle: function (type, element, value) {\n            const style = element.style;\n            if (type === 'transform') {\n                style.webkitTransform = style.msTransform = style.transform = value;\n            }\n        },\n        setText: function (text) {\n            if (this.element) {\n                this.element.textContent = text;\n            }\n        },\n        setCursorHoverStyle: function (style) {\n            this.cursorStyle = style;\n        },\n        addHoverText: function (text, delta = 40) {\n            if (!this.element) {\n                this.element = document.createElement('div');\n                this.element.style.display = 'none';\n                this.element.style.color = '#fff';\n                this.element.style.top = 0;\n                this.element.style.maxWidth = '50%';\n                this.element.style.maxHeight = '50%';\n                this.element.style.textShadow = '0 0 3px #000000';\n                this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n                this.element.style.position = 'absolute';\n                this.element.classList.add('panolens-infospot');\n                this.element.verticalDelta = delta;\n            }\n            this.setText(text);\n        },\n        addHoverElement: function (el, delta = 40) {\n            if (!this.element) {\n                this.element = el.cloneNode(true);\n                this.element.style.display = 'none';\n                this.element.style.top = 0;\n                this.element.style.position = 'absolute';\n                this.element.classList.add('panolens-infospot');\n                this.element.verticalDelta = delta;\n            }\n        },\n        removeHoverElement: function () {\n            if (this.element) {\n                if (this.element.left) {\n                    this.container.removeChild(this.element.left);\n                    this.element.left = null;\n                }\n                if (this.element.right) {\n                    this.container.removeChild(this.element.right);\n                    this.element.right = null;\n                }\n                this.container.removeChild(this.element);\n                this.element = null;\n            }\n        },\n        lockHoverElement: function () {\n            if (this.element) {\n                this.element.locked = true;\n            }\n        },\n        unlockHoverElement: function () {\n            if (this.element) {\n                this.element.locked = false;\n            }\n        },\n        enableRaycast: function (enabled = true) {\n            if (enabled) {\n                this.raycast = this.originalRaycast;\n            } else {\n                this.raycast = () => {\n                };\n            }\n        },\n        show: function (delay = 0) {\n            const {animated, hideAnimation, showAnimation, material} = this;\n            if (animated) {\n                hideAnimation.stop();\n                showAnimation.delay(delay).start();\n            } else {\n                this.enableRaycast(true);\n                material.opacity = 1;\n            }\n        },\n        hide: function (delay = 0) {\n            const {animated, hideAnimation, showAnimation, material} = this;\n            if (animated) {\n                showAnimation.stop();\n                hideAnimation.delay(delay).start();\n            } else {\n                this.enableRaycast(false);\n                material.opacity = 0;\n            }\n        },\n        setFocusMethod: function (event) {\n            if (event) {\n                this.HANDLER_FOCUS = event.method;\n            }\n        },\n        focus: function (duration, easing) {\n            if (this.HANDLER_FOCUS) {\n                this.HANDLER_FOCUS(this.position, duration, easing);\n                this.onDismiss();\n            }\n        },\n        dispose: function () {\n            const {geometry, material} = this;\n            const {map} = material;\n            this.removeHoverElement();\n            if (this.parent) {\n                this.parent.remove(this);\n            }\n            if (map) {\n                map.dispose();\n                material.map = null;\n            }\n            if (geometry) {\n                geometry.dispose();\n                this.geometry = null;\n            }\n            if (material) {\n                material.dispose();\n                this.material = null;\n            }\n        }\n    });\n    return Infospot;\n});"]}