{"version":3,"sources":["loaders/CubeTextureLoader.js"],"names":["define","ImageLoader","THREE","load","urls","onLoad","onProgress","onError","texture","loaded","progress","all","loadings","CubeTexture","map","url","index","image","images","needsUpdate","event","i","total"],"mappings":";;;;;;;AAAAA,QACI,gBACA,mBACD,SAAUC,EAAaC,GACtB,aAwCA,OAtCIC,KAAM,SAAUC,EAAMC,EAAS,SAC5BC,EAAa,SACbC,GACC,IAAIC,EAASC,EAAQC,EAAUC,EAAKC,EAgCpC,OA/BAJ,EAAU,IAAIN,EAAMW,gBACpBJ,EAAS,EACTC,KACAC,KACAP,EAAKU,IAAI,SAAUC,EAAKC,GACpBf,EAAYE,KAAKY,EAAK,SAAUE,GAC5BT,EAAQU,OAAOF,GAASC,EAET,MADfR,IAEID,EAAQW,aAAc,EACtBd,EAAOG,KAEZ,SAAUY,GAQT,IAAK,IAAIC,KAPTX,EAASM,IACLP,OAAQW,EAAMX,OACda,MAAOF,EAAME,OAEjBX,EAAIF,OAAS,EACbE,EAAIW,MAAQ,EACZV,EAAW,EACGF,EACVE,IACAD,EAAIF,QAAUC,EAASW,GAAGZ,OAC1BE,EAAIW,OAASZ,EAASW,GAAGC,MAEzBV,EAAW,IACXD,EAAIW,MAAQX,EAAIW,MAAQV,EAAW,GAEvCN,EAAWK,IACZJ,KAEAC","file":"../../loaders/CubeTextureLoader.js","sourcesContent":["define([\n    './ImageLoader',\n    'skylark-threejs'\n], function (ImageLoader, THREE) {\n    'use strict';\n    const CubeTextureLoader = {\n        load: function (urls, onLoad = () => {\n        }, onProgress = () => {\n        }, onError) {\n            var texture, loaded, progress, all, loadings;\n            texture = new THREE.CubeTexture([]);\n            loaded = 0;\n            progress = {};\n            all = {};\n            urls.map(function (url, index) {\n                ImageLoader.load(url, function (image) {\n                    texture.images[index] = image;\n                    loaded++;\n                    if (loaded === 6) {\n                        texture.needsUpdate = true;\n                        onLoad(texture);\n                    }\n                }, function (event) {\n                    progress[index] = {\n                        loaded: event.loaded,\n                        total: event.total\n                    };\n                    all.loaded = 0;\n                    all.total = 0;\n                    loadings = 0;\n                    for (var i in progress) {\n                        loadings++;\n                        all.loaded += progress[i].loaded;\n                        all.total += progress[i].total;\n                    }\n                    if (loadings < 6) {\n                        all.total = all.total / loadings * 6;\n                    }\n                    onProgress(all);\n                }, onError);\n            });\n            return texture;\n        }\n    };\n    return CubeTextureLoader;\n});"]}